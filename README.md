[![](https://iarduino.ru/img/logo.svg)](https://iarduino.ru)[![](https://wiki.iarduino.ru/img/git-shop.svg?3)](https://iarduino.ru) [![](https://wiki.iarduino.ru/img/git-wiki.svg?2)](https://wiki.iarduino.ru) [![](https://wiki.iarduino.ru/img/git-lesson.svg?2)](https://lesson.iarduino.ru)[![](https://wiki.iarduino.ru/img/git-forum.svg?2)](http://forum.trema.ru)

**This is a library for Arduino IDE by iArduino.ru. It allows to work with [433Mhz radio modules](https://iarduino.ru/shop/Expansion-payments/besprovodnoy-peredatchik-priemnik-315-433mhz-dc5v.html)**

**Данная библиотека для Arduino IDE от [iArduino.ru](https://iarduino.ru) позволяет работать c [радио модулями 433МГц](https://iarduino.ru/shop/Expansion-payments/besprovodnoy-peredatchik-priemnik-315-433mhz-dc5v.html)**

> Подробнее про установку библиотеки читайте в нашей [инструкции](https://wiki.iarduino.ru/page/Installing_libraries/).

> Подробнее про подключение к [Arduino UNO](https://iarduino.ru/shop/boards/arduino-uno-r3.html)/[Piranha UNO](https://iarduino.ru/shop/boards/piranha-uno-r3.html) читайте на в нашем уроке "[Соединяем две arduino по радиоканалу 433 МГц](https://lesson.iarduino.ru/page/urok-26-6-soedinyaem-dve-arduino-po-radiokanalu-433-mgc/)"


| Модель | Ссылка на магазин |
|---|---|
| <p>Беспроводной передатчик + приемник 433Mhz</p> <img src="https://iarduino.ru/img/catalog/2054be2174182b55c7dfb2c8e1867982.jpg" width="350px"></img>| https://iarduino.ru/shop/Expansion-payments/besprovodnoy-peredatchik-priemnik-315-433mhz-dc5v.html |

Библиотека использует внешнее прерывание для получения данных с приёмника. В связи с чем приёмник может быть подключен только к выводу использующему внешнее прерывание. Назначение и синтаксис функций используемых в данной библиотеке аналогичен назначению функций библиотеки RF24, что облегчает написание и восприятие скетчей для разных типов модулей. Достоверность полученных данных проверяется в библиотеке передачей и проверкой циклически избыточного кода.

При подключении библиотеки создается отдельный объект для приёмника (если он используется) и отдельный объект для передатчика (если он используется), что экономит память, если используется только передатчик или только приёмник.
## Назначение функций:

### Подключение библиотеки:

**Для передатчика:**

```C++
#include <iarduino_RF433_Transmitter.h> // Подключаем библиотеку для работы с передатчиком FS1000A
iarduino_RF433_Transmitter radioTX( №_ВЫВОДА ); // Создаём объект radioTX с указанием вывода подключённого к передатчику
```

**Для приёмника:**

```C++
#include <iarduino_RF433_Receiver.h> // Подключаем библиотеку для работы с приёмником MX-RM-5V
iarduino_RF433_Receiver radioRX( №_ВЫВОДА ); // Создаём объект radioRX с указанием вывода подключённого к приёмнику
```

**Выводы к которым можно подключить приёмник:**

| **Плата Arduino** | **Выводы использующие внешнее прерывание** |
|---|---|
| Uno, ProMini, Nano, Ethernet | 2, 3 |
| Leonadro, Micro | 2, 3, 0, 1, 7 |
| Mega 2560 | 2, 3, 18, 19, 20, 21 |
| Due | Любые выводы |

### Функции для работы с передатчиком:

```C++
ОБЪЕКТ.begin();
```

- Назначение: Инициализация передатчика
- Синтаксис: **begin**( [СКОРОСТЬ] );
- Параметры:
- СКОРОСТЬ - не обязательный параметр, целое число, указывающее скорость передачи данных (бит/сек).
- Если скорость указана и её не требуется менять, то можно не вызывать функцию **setDataRate**().
- Возвращаемые значения: Нет.
- Примечание:
    - Функция вызывается 1 раз в коде setup.
    - Скорость передачи данных должна совпадать, как для передатчика так и для приёмника.

```C++
ОБЪЕКТ.setDataRate();
```

- Назначение: Указание или изменение скорости передачи данных.
- Синтаксис: **setDataRate**( СКОРОСТЬ );
- Параметры:
- СКОРОСТЬ - целое число, указывающее скорость передачи данных (бит/сек).
- Возвращаемые значения: Нет.
- Примечание:
- Если скорость указана при вызове функции **begin**() и её не требуется менять, то данную функцию можно не вызывать.
- Скорость передачи данных должна совпадать, как для передатчика так и для приёмника.
- Скорость можно указать как целым числом, так и константами:
    - i433\_5KBPS
    - i433\_4KBPS
    - i433\_3KBPS
    - i433\_2KBPS
    - i433\_1KBPS
    - i433\_500BPS
    - i433\_100BPS
- Скорость можно менять во время работы передатчика.

```C++
ОБЪЕКТ.openWritingPipe();
```

- Назначение: Открытие трубы для передачи данных
- Синтаксис: **openWritingPipe**( НОМЕР\_ТРУБЫ );
- Параметры:
- НОМЕР\_ТРУБЫ - целое число, от 0 до 7.
- Возвращаемые значения: Нет.
- Примечание:
    - Номер трубы это адрес передатчика, по которому приёмник «решит» получать или нет отправленные данные.
    - Передатчик может передавать данные только по одной из труб (от 0 до 7)
    - Номер трубы можно менять во время работы передатчика.

```C++
ОБЪЕКТ.write();
```

- Назначение: Передача данных.
- Синтаксис: **write**( ССЫЛКА\_НА\_МАССИВ , КОЛИЧЕСТВО\_БАЙТ );
- Параметры:
- ССЫЛКА\_НА\_МАССИВ - ссылка на массив любого типа (в том числе и на строку), данные которого требуется передать.
- КОЛИЧЕСТВО\_БАЙТ - число определяющее, какое количество байт требуется передать.
- Возвращаемые значения: Нет.
- Примечание: Если Вы используете несколько передатчиков, то используйте интервалы между передачей данных.

### Функции для работы с приёмником:

```C++
ОБЪЕКТ.begin();
```

- Назначение: Инициализация приёмника
- Синтаксис: **begin**( [СКОРОСТЬ] );
- Параметры:
- СКОРОСТЬ - не обязательный параметр, целое число, указывающее скорость приёма данных (бит/сек).
- Если скорость указана и её не требуется менять, то можно не вызывать функцию **setDataRate**().
- Возвращаемые значения: Нет.
- Примечание:
    - Функция вызывается 1 раз в коде setup.
    - Скорость приёма данных должна совпадать, как для передатчика так и для приёмника.

```C++
ОБЪЕКТ.setDataRate();
```

- Назначение: Указание или изменение скорости приёма данных.
- Синтаксис: **setDataRate**( СКОРОСТЬ );
- Параметры:
- СКОРОСТЬ - целое число, указывающее скорость приёма данных (бит/сек).
- Возвращаемые значения: Нет.
- Примечание:
- Если скорость указана при вызове функции **begin**() и её не требуется менять, то данную функцию можно не вызывать.
- Скорость приёма данных должна совпадать, как для передатчика так и для приёмника.
- Скорость можно указать как целым числом, так и константами:
    - i433\_5KBPS
    - i433\_4KBPS
    - i433\_3KBPS
    - i433\_2KBPS
    - i433\_1KBPS
    - i433\_500BPS
    - i433\_100BPS
- Скорость можно менять во время работы приёмника, но если во время изменения скорости принимался пакет данных, он будет пропущен.

```C++
ОБЪЕКТ.openReadingPipe();
```

- Назначение: Открытие трубы для приёма данных
- Синтаксис: **openReadingPipe**( [НОМЕР\_ТРУБЫ] );
- Параметры:
- НОМЕР\_ТРУБЫ - необязательный параметр, целое число, от 0 до 7.
- Возвращаемые значения: Нет.
- Примечание:
    - Номер трубы это адрес передатчика (от 0 до 7), открывая трубу мы соглашаемся принимать данные от указанного передатчика.
    - Функцию можно вызвать несколько раз, открывая несколько труб для приёма данных.
    - Если вызвать функцию без параметра, то будут открыты все трубы от 0 до 7.

```C++
ОБЪЕКТ.closeReadingPipe();
```

- Назначение: Закрытие трубы от приёма данных
- Синтаксис: **closeReadingPipe**( [НОМЕР\_ТРУБЫ] );
- Параметры:
- НОМЕР\_ТРУБЫ - необязательный параметр, целое число, от 0 до 7.
- Возвращаемые значения: Нет.
- Примечание:
    - Действие противоположное функции **openReadingPipe**().
    - Функцию можно вызвать несколько раз, закрывая несколько труб от приёма данных.
    - Если вызвать функцию без параметра, то будут закрыты все трубы от 0 до 7.

```C++
ОБЪЕКТ.startListening();
```

- Назначение: Включение прослушивания открытых труб
- Синтаксис: **startListening**();
- Параметры: Нет.
- Возвращаемые значения: Нет.
- Примечание: Открывать и закрывать трубы, можно и после начала их прослушивания.

```C++
ОБЪЕКТ.stopListening();
```

- Назначение: Выключение прослушивания открытых труб
- Синтаксис: **stopListening**();
- Параметры: Нет.
- Возвращаемые значения: Нет.
- Примечание: Данная функция отключает обработку внешнего прерывания, что может ускорить выполнение скетча.

```C++
ОБЪЕКТ.available();
```

- Назначение: Проверка наличия принятых данных, доступных для чтения функцией read()
- Синтаксис: **available**( [ССЫЛКА\_НА\_ПЕРЕМЕННУЮ] );
- Параметры:
- ССЫЛКА\_НА\_ПЕРЕМЕННУЮ - необязательный параметр, ссылка на переменную типа uint8\_t, в которую будет записан номер трубы, если данные приняты и доступны для чтения.
- Возвращаемые значения: **true** / **false** - имеются данные доступные для чтения или нет.
- Примечание: По номеру трубы можно определить, данные какого передатчика были приняты.

```C++
ОБЪЕКТ.read();
```

- Назначение: Передача данных.
- Синтаксис: **read**( ССЫЛКА\_НА\_МАССИВ , КОЛИЧЕСТВО\_БАЙТ );
- Параметры:
- ССЫЛКА\_НА\_МАССИВ - ссылка на массив любого типа (в том числе и на строку), в который требуется прочитать данные.
- КОЛИЧЕСТВО\_БАЙТ - число определяющее, какое количество байт требуется прочитать.
- Возвращаемые значения: Нет.
- Примечание:
    - Если указанное количество байт больше размера массива на который ссылается ссылка, то данные запишутся за пределы массива, что может вызвать некорректную работу скетча.
    - Если указанное количество байт больше чем реально принято, то в массив запишутся только реально принятые байты, а оставшиеся байты массива останутся без изменений.

